---
title: "R Data Science Course 9: Choose Your Own Project"
author: "James Lo"
date: '2022-06-09'
output: 
  pdf_document:
    latex_engine: xelatex
    df_print: kable
    toc : TRUE
    toc_depth: 3
urlcolor: blue
mainfont: Calibri Light
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
```

# Introduction

(words go here)

## Data Loading

```{r packages, warning = F}
if(!require(tidyverse)) install.packages("tidyverse",
                                         repos = "http://cran.us.r-project.org")
if(!require(caret)) install.packages("caret",
                                     repos = "http://cran.us.r-project.org")
if(!require(data.table)) install.packages("data.table", 
                                          repos = "http://cran.us.r-project.org")
if(!require(dplyr)) install.packages("dplyr", 
                                     repos = "http://cran.us.r-project.org")
if(!require(dslabs)) install.packages("dslabs", 
                                      repos = "http://cran.us.r-project.org")
if(!require(lubridate)) install.packages("lubridate", 
                                         repos = "http://cran.us.r-project.org")
if(!require(ggplot2)) install.packages("ggplot2", 
                                       repos = "http://cran.us.r-project.org")
if(!require(readr)) install.packages("readr", 
                                       repos = "http://cran.us.r-project.org")
if(!require(readxl)) install.packages("readxl", 
                                       repos = "http://cran.us.r-project.org")
library(tidyverse)
library(caret)
library(data.table)
library(dslabs)
library(dplyr)
library(lubridate)
library(ggplot2)
library(readr)
library(readxl)
# will add more packages as needed

```

```{r data_download, warning = FALSE}
uci_url <- 'https://archive.ics.uci.edu/ml/machine-learning-databases/00602/DryBeanDataset.zip'

download.file(uci_url, 'DryBeanDataset.zip')
```
```{r data_unzip, warning = FALSE}
unzip('DryBeanDataset.zip')
```

```{r data_read, warning = FALSE}
# specify path
path <- paste0(getwd(), '/DryBeanDataset/Dry_Bean_Dataset.xlsx')
# read the first sheet (where the data is)
beans <- read_xlsx(path, sheet = 1)
```

## Exploratory Analysis

### Overview

```{r data_overview}
# overview of the data's size and format
str(beans)
```
The dataset contains 13611 entries, each representing a scanned bean. There are 12 metrics describing the dimensions of each bean, plus four 'shape factors' which are derived from a previous machine learning article on rice grains (cite).

### Checking for NA Values

```{r na_check}
which(is.na(beans))
```
As described on the UCI website, the dataset indeed contains no NA entries.

### Distribution of Outcome Classes

```{r num_classes}
# checking the distribution of classes (bean types) in the dataset
beans %>% group_by(Class) %>%
  summarize(count = n())
```
The dataset has a rather uneven distribution of the 7 bean varieties. The most frequently found type is Dermason at 3546 entries, while the least common is Bombay at 522 entries. This uneven distribution must be accounted for during model fitting and accuracy assessments.

### Distribution of Potential Predictor Variables Among Classes

Before models could be built, the distribution of values among differnt bean varieties were visualized with boxplots for all 16 possible predictor variables. This was done to understand the levels of variability between bean varieties that were present in each potential predictor, and select the most informative predictors for models that perform best with lower-dimensional data.

#### Area

```{r Area_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Area), y = Area)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Areas')
```
The area IQR for Bombay was distinctively higher than those of all other varieties. Heavily overlapping IQRs exist in Cali and Barbunya, as well as Sira and Seker. Dermason, Seker, and Sira all have much narrower IQRs compared to the other varieties, despite having very close distribution ranges.

#### Perimeter

```{r Perimeter_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Perimeter), y = Perimeter)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Perimeter Sizes')
```
Similarly to the Area metric, Bombay had a distinctively higher range of Perimeter lengths than the other varieties. The IQR for Cali existed entirely within that of Barbunya, while the IQRs for Dermason and Seker overlapped. The IQRs of perimeter lengths for smaller bean varieties were less tight than seen in the Area graph, but also somewhat more distinct relative to the scale of the y-axis.

#### Major Axis Length

```{r MajorAxisLength_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, MajorAxisLength), y = MajorAxisLength)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Major Axis Lengths')
```
For Major Axis Length, Bombay once again had an IQR that was distinctively larger than all others. Barbunya/Horoz and Dermason/Seker had heavily overlapping IQRs, while Cali had a smaller IQR overlap with Horoz/Barbunya.

#### Minor Axis Length

```{r MinorAxisLength_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, MinorAxisLength), y = MinorAxisLength)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Minor Axis Lengths')
```
The distribution of Minor Axis Lengths was similar to that of Major Axis lengths, but with a few differences: here the heaviest overlap was between Cali and Barbunya, followed by Horoz/Sira and Sira/Seker. Also, Dermason had a partial IQR overlap with Horoz rather than a near-complete one with Seker.

#### Aspect Ratio

```{r Aspectratio_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, AspectRation), y = AspectRation)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Aspect Ratios')
```

The Aspect Ratio distributions differed from the previous potential predictors in that Bombay no longer had the most distinct distribution of values. Instead, Horoz and Cali had IQRs distinctively higher than others, while Seker had a lower IQR. The remaining varieties (Dermason, Barbunya, Sira, Bombay) all had heavily overlapping IQRs.

#### Eccentricity

```{r Eccentricity_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Eccentricity), y = Eccentricity)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Eccentricity Values')
```

The Eccentricity distributions were similar to that of Aspect Ratios, but with the two varieties having higher IQRs (Horoz, Cali) deviating from the others less while the one with lower IQR (Seker) deviating more.

#### Convex Area

```{r ConvexArea_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, ConvexArea), y = ConvexArea)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Convex Area Sizes')
```

With the Covex Area Sizes, a distribution somewhat similar to the Area, Perimeter, and Axis Length distributions could be seen again. Bombay had a distinctively high IQR of Convex Areas, while Dermason had the lowest range. Cali and Barbunya had heavily overlapping IQRs, with less overlap existing among the other varieties. The narrowest IQRs belonged to Seker and Sira.

#### Equivalent Diameter

```{r EquivDiameter_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, EquivDiameter), y = EquivDiameter)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Equivalent Diameters')
```

The distributions of Equivalent Diameters were fairly similar to that of Convex Areas. Once again, Cali and Barbunya had heavy overlaps, with Bombay having a distinctly higher IQR.

#### Extent

```{r Extent_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Extent), y = Extent)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Extent Ratios')
```

The distribution of Extent Ratios exhibited heavy IQR overlaps between all bean varieties.

#### Solidity

```{r Solidity_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Solidity), y = Solidity)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Solidity Ratios')
```

The distribution of Solidity values exhibited heavy IQR overlaps between nearly all bean varieties. Also, every bean variety had many outliers (values outside the boxplot whiskers) on the lower end of their respective distributions.

#### Roundness

```{r roundness_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, roundness), y = roundness)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Roundness Values')
```

The ranking of median Roundness values were similar to that of that of Solidity, but with the lowest three (Cali, Barnunya, Horoz) switched. Less overlap existed than in Solidity (except for heavy overlap Horoz and Barbunya), but many outliers outside the whiskers existed for all varieties.

#### Compactness

```{r Compactness_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, Compactness), y = Compactness)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Compactness Values')
```

The distribution of Compactness values had heavy overlaps between Bombay, Sira, Barbunya, and Dermason. Seker had the highest range of Compactness, while Horoz had the lowest. All varieties had many outliers, mostly on the high ends of the distributions.

#### Shape Factor 1

```{r ShapeFactor1_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, ShapeFactor1), y = ShapeFactor1)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Shape Factor 1 Values')
```

The distributions of Shape Factor 1 values featured heavy overlap between Barbunya/Cali, and relatively less overlap between Seker/Sira/Horoz. Dermason had the highest range of Shape Factor 1, and Bombay had the lowest.

#### Shape Factor 2

```{r ShapeFactor2_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, ShapeFactor2), y = ShapeFactor2)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Shape Factor 2 Values')
```

The distributions of Shape Factor 2 values had relatively less IQR overlap compared to most other variables examined, with the 4 highest Shape Factor 2 ranges (Seker, Dermason, Sira, Barbunya) all having non-overlapping IRRs. Horoz and Cali had a large IQR overlap, but neither had overlapping IQRs with Bombay. However, outliers on the high ends of the ranges were common.

#### Shape Factor 3

```{r ShapeFactor3_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, ShapeFactor3), y = ShapeFactor3)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Shape Factor 3 Values')
```

The distributions of Shape Factor 3 values had heavy overlaps in Bombay, Sira, Barbunya, and Dermason. Seker had a distinctively higher IQR than the other varieties but also many low outliers; the opposite was true for Horoz.

#### Shape Factor 4

```{r ShapeFactor4_boxplot}
beans %>%
  ggplot(aes(x = reorder(Class, ShapeFactor4), y = ShapeFactor4)) +
  geom_boxplot() +
  xlab('Class') +
  ggtitle('Distribution of Shape Factor 4 Values')
```

The distributions for Shape Factor 4 exhibited heavy overlaps between nearly all varieties, with the possible exception of Seker. In addition, every variety had many outliers on the low ends of their respective distributions.

### Combining Predictors for Scatterplots

# Methods

# Results

# Conclusion

# Citation
